<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DORAMAMAX PRO</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}

body{background:#0e0b16;color:white}

/* HEADER */
header{
display:flex;
align-items:center;
justify-content:space-between;
padding:12px 16px;
background:linear-gradient(135deg,#3a0ca3,#7209b7);
}
.menu-btn{font-size:26px;cursor:pointer}
.logo{font-size:18px;font-weight:bold}

/* MENU */
.sidebar{
position:fixed;top:0;left:-260px;width:260px;height:100%;
background:#1a102e;padding:20px;transition:.3s;z-index:1000
}
.sidebar.active{left:0}
.sidebar h3{margin-bottom:12px}
.sidebar a{
display:block;color:white;text-decoration:none;padding:10px;
border-radius:8px;margin-bottom:6px
}
.sidebar a:hover{background:#6d28d9}

/* BUSCA */
.search-box{padding:12px}
.search-box input{
width:100%;padding:12px;border-radius:20px;border:none;outline:none
}

/* SLIDER */
.slider{margin:12px;border-radius:12px;overflow:hidden}
.slider img{width:100%;display:none}
.slider img.active{display:block}

/* SEÃ‡ÃƒO */
.section{padding:16px}
.section h2{margin-bottom:10px}

/* GRID */
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}

.card{
background:#1a102e;border-radius:12px;overflow:hidden;
transition:.2s;cursor:pointer
}
.card:hover{transform:scale(1.02)}
.card img{width:100%}
.card-content{padding:10px}

.price{color:#a78bfa;font-weight:bold}

/* BOTÃƒO */
.btn-buy{
padding:10px;border-radius:8px;border:none;width:100%;
background:#7c3aed;color:white;cursor:pointer;margin-top:6px
}
.btn-buy:hover{background:#a78bfa}

/* LOADING */
#loading{
position:fixed;inset:0;background:rgba(0,0,0,.7);
display:none;align-items:center;justify-content:center;
color:#a78bfa;font-size:22px;z-index:9999
}

/* FOOTER */
footer{text-align:center;padding:16px;opacity:.6}
</style>
</head>

<body>

<header>
<div class="menu-btn" onclick="toggleMenu()">â˜°</div>
<div class="logo">DORAMAMAX PRO</div>
</header>

<!-- MENU -->
<div class="sidebar" id="menu">
<h3>ğŸ“‚ Menu</h3>
<a onclick="filterCategory('popular')">ğŸ”¥ Mais Vendidos</a>
<a onclick="filterCategory('dorama')">ğŸ¬ Doramas</a>
<a onclick="filterCategory('serie')">ğŸ“º SÃ©ries</a>
<a onclick="filterCategory('lancamento')">ğŸ†• LanÃ§amentos</a>
<a href="admin.html">âš™ï¸ Painel ADM</a>
<a href="https://t.me/RendaAzulBot" target="_blank">ğŸ¤– Bot Telegram</a>
<a href="https://t.me/doramaasmax" target="_blank">ğŸ“¢ Grupo Telegram</a>
</div>

<!-- BUSCA -->
<div class="search-box">
<input id="search" placeholder="Buscar Doramas ou SÃ©ries..." onkeyup="searchItems(event)">
</div>

<!-- SLIDER -->
<div class="slider">
<img src="assets/capa1.jpg.jpeg" class="active">
<img src="assets/capa2.jpg.jpeg">
<img src="assets/capa3.jpg.jpeg">
</div>

<!-- MAIS VENDIDOS -->
<div class="section">
<h2>ğŸ”¥ Mais Vendidos</h2>
<div class="grid" id="productList">

<div class="card item" data-category="dorama">
<img src="https://i.postimg.cc/7Ygj801x/IMG-20260131-193417-399.jpg">
<div class="card-content">
<h4 class="title">Princesa IndomÃ¡vel</h4>
<p class="price">R$ 5,00</p>
<button class="btn-buy">Comprar</button>
</div>
</div>

<div class="card item" data-category="serie">
<img src="https://i.postimg.cc/pry8Qf2S/IMG-20260131-200656-219.jpg">
<div class="card-content">
<h4 class="title">Beleza Fria Nova Vida</h4>
<p class="price">R$ 5,00</p>
<button class="btn-buy">Comprar</button>
</div>
</div>

</div>
</div>

<footer>Â© 2026 DoramaFlix Pro â€” Streaming Premium</footer>

<!-- LOADING -->
<div id="loading">â³ Carregando...</div>

<script>
const tg = Telegram.WebApp;
tg.expand();

const menu = document.getElementById("menu");
const loading = document.getElementById("loading");
const searchInput = document.getElementById("search");

// MENU
function toggleMenu(){
menu.classList.toggle("active");
}

// FECHAR MENU FORA
document.addEventListener("click", e=>{
if(!menu.contains(e.target) && !e.target.classList.contains("menu-btn")){
menu.classList.remove("active");
}
});

// SLIDER
let slides=document.querySelectorAll(".slider img");
let i=0;
setInterval(()=>{
slides[i].classList.remove("active");
i=(i+1)%slides.length;
slides[i].classList.add("active");
},3000);

// LOADING
function showLoading(){loading.style.display="flex"}
function hideLoading(){loading.style.display="none"}

// BUSCA + FECHAR TECLADO
function searchItems(e){
if(e.key==="Enter") searchInput.blur();
let text=searchInput.value.toLowerCase();
let items=document.querySelectorAll(".item");

showLoading();
setTimeout(()=>{
items.forEach(item=>{
let title=item.querySelector(".title").innerText.toLowerCase();
item.style.display=title.includes(text)?"block":"none";
});
hideLoading();
},500);
}

// FILTRAR CATEGORIA
function filterCategory(cat){
showLoading();
document.querySelectorAll(".item").forEach(item=>{
item.style.display=item.dataset.category===cat||cat==="popular"?"block":"none";
});
menu.classList.remove("active");
setTimeout(hideLoading,400);
}

// ABRIR DETAIL
function openDetail(id){
showLoading();
setTimeout(()=>{
window.location.href="detail.html?id=" + encodeURIComponent(id);
},400);
}
tg.expand();

let items = [];

fetch("https://dorama-repository-fp.onrender.com/api/catalog")
.then(r=>r.json())
.then(data => {
 items = data;
 render(items);
});

function render(list){
 const grid = document.getElementById("productList");
 grid.innerHTML = "";
 list.forEach(d => {
   grid.innerHTML += `
     <div class="card item" data-category="${d.category ||'popular'}" onclick="openDetail=('${d.id || d.title}')">
       <img src="${d.cover}">
       <div class="card-content">
         <h4 class="title">${d.title}</h4>
       <p class="price">R$ ${d.price || "5,00"}</p>
       <button class="btn-buy">Comprar</button>
       </div>
     </div>
   `;
 });
 attachBuyButtons();
}
// BOTÃƒO COMPRAR
function attachBuyButtons(){
document.querySelectorAll(".btn-buy").forEach(btn=>{
btn.addEventListener("click", e=>{
e.stopPropagation();
 const card = btn.closest(".card");
 const title = card.querySelector(".title").innerText;
showLoading();
setTimeout(()=>{
hideLoading();
alert("ğŸ’œ Compra iniciada â€” redirecionando ao pagamento...");
window.location.href = "detail.html?produto=" + encodeURIComponent(title);
},600);
});
});
}
</script>

</body>
</html>
