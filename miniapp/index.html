<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<title>DoramaFlix Pro</title>

<style>
body {
  margin:0;
  background:#0B0B0F;
  color:#fff;
  font-family:Arial;
}
header {
  padding:16px;
  font-size:22px;
  font-weight:bold;
  color:#7A3CFF;
  aligment:center;
}
input {
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  margin:12px 0;
}
.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
  gap:12px;
}
.card img {
  width:100%;
  border-radius:12px;
  box-shadow:0 0 10px #7A3CFF50;
}
.card p {
  margin-top:6px;
  font-size:14px;
}
</style>
</head>

<body>
<header> DoramaFlix Pro</header>
<input id="search" placeholder="Buscar Doramas...">

<div class="grid" id="grid"></div>

<script>
const tg = Telegram.WebApp;
tg.expand();

let items = [];

fetch("https://dorama-repository-fp.onrender.com/")
.then(r=>r.json())
.then(data => {
 items = data;
 render(items);
});

function render(list){
 const grid = document.getElementById("grid");
 grid.innerHTML = "";
 list.forEach(d => {
   grid.innerHTML += `
     <div class="card" onclick="openItem('${d._id}')">
       <img src="${d.cover}">
       <p>${d.title}</p>
     </div>
   `;
 });
}

document.getElementById("search").oninput = e => {
 const t = e.target.value.toLowerCase();
 render(items.filter(i => i.title.toLowerCase().includes(t)));
};

function openItem(id){
 window.location.href = "detail.html?id=" + id;
}
</script>
</body>
</html>
</body>
</html>